{"version":3,"sources":["Components/Person.js","Components/Filter.js","Components/PersonForm.js","Components/Notification.js","services/persons.js","App.js","index.js"],"names":["Person","props","person","name","number","onClick","e","deletePerson","id","Persons","persons","filter","toUpperCase","includes","phonebookFilterString","map","filteredPerson","key","Filter","value","onChange","handleFilterChange","PersonForm","onSubmit","addName","newName","handleNameChange","newNumber","handleNumberChange","type","message","className","baseUrl","axios","get","then","response","data","newObject","post","delete","console","log","put","App","useState","setPersons","setNewName","setNewNumber","setPhonebookFilterString","notificationMessage","setNotificationMessage","errorMessage","setErrorMessage","useEffect","personService","initialPersons","event","target","preventDefault","find","window","confirm","personObject","updatedPerson","catch","error","directory","setTimeout","returnedPerson","concat","p","delPersName","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.60440c6a.chunk.js","sourcesContent":["import React from 'react'\r\n\r\nconst Person = (props) => (\r\n  <li>\r\n    {props.person.name} {props.person.number}\r\n    <button onClick={(e) => props.deletePerson(e, props.person.id)}>\r\n      Delete </button>\r\n  </li>\r\n)\r\n\r\nconst Persons = (props) => (\r\n  <ul>\r\n    {props.persons.filter(person =>\r\n      person.name.toUpperCase().includes(props.phonebookFilterString.toUpperCase())).map(filteredPerson => (\r\n        <Person key={filteredPerson.id} person={filteredPerson}\r\n        deletePerson = {props.deletePerson}/>\r\n    ))}\r\n  </ul>\r\n)\r\n\r\nexport default Persons\r\n","import React from 'react'\r\n\r\nconst Filter = (props) => (\r\n  <div> Find name: <input\r\n    value={props.phonebookFilterString}\r\n    onChange={props.handleFilterChange}\r\n  />\r\n  </div>\r\n)\r\n\r\nexport default Filter\r\n","import React from 'react'\r\n\r\nconst PersonForm = (props) => (\r\n  <form onSubmit={props.addName}>\r\n    <div>\r\n      Name: <input\r\n        value={props.newName}\r\n        onChange={props.handleNameChange}\r\n      />\r\n    </div>\r\n    <div>\r\n      Number: <input\r\n        value={props.newNumber}\r\n        onChange={props.handleNumberChange}\r\n      />\r\n    </div>\r\n\r\n    <div>\r\n      <button type=\"submit\">Add entry</button>\r\n    </div>\r\n  </form>\r\n)\r\n\r\nexport default PersonForm\r\n","import React from 'react'\r\n\r\nconst Notification = ({ message }) => {\r\n  if (message === null) {\r\n    return null\r\n  }\r\n\r\n\r\n\r\n  return (\r\n    <div className=\"notification\">\r\n      {message}\r\n    </div>\r\n  )\r\n}\r\n\r\nconst Error = ({ message }) => {\r\n  if (message === null) {\r\n    return null\r\n  }\r\n\r\n\r\n\r\n  return (\r\n    <div className=\"error\">\r\n      {message}\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default { Notification, Error }\r\n","import axios from 'axios'\r\nconst baseUrl = '/api/persons'\r\n\r\nconst getAll = () => {\r\n  const request = axios.get(baseUrl)\r\n  return request.then(response => response.data)\r\n}\r\n\r\nconst create = newObject => {\r\n  const request = axios.post(baseUrl, newObject)\r\n  return request.then(response => response.data)\r\n}\r\n\r\nconst removePerson = (id)  => {\r\n  const request = axios.delete(`${baseUrl}/${id}`)\r\n  return request.then(response=> {\r\n    console.log(response)\r\n  })\r\n}\r\n\r\nconst update = (id, newObject) => {\r\n  console.log('update function called')\r\n  const request = axios.put(`${baseUrl}/${id}`, newObject)\r\n  return request.then(response => response.data)\r\n}\r\n\r\nexport default { getAll, create, removePerson, update }\r\n","import React, { useState, useEffect } from 'react'\r\nimport Persons from './Components/Person'\r\nimport Filter from './Components/Filter'\r\nimport PersonForm from './Components/PersonForm'\r\nimport Notifications from './Components/Notification'\r\nimport personService from './services/persons'\r\n\r\n\r\n\r\nconst App = () => {\r\n  const [ persons, setPersons ] = useState([])\r\n  const [ newName, setNewName ] = useState('')\r\n  const [ newNumber, setNewNumber ] = useState('')\r\n  const [ phonebookFilterString, setPhonebookFilterString ] = useState('')\r\n  const [ notificationMessage, setNotificationMessage ] = useState(null)\r\n  const [ errorMessage, setErrorMessage ] = useState(null)\r\n\r\n  useEffect(() => {\r\n    personService\r\n      .getAll()\r\n      .then(initialPersons => {\r\n        setPersons(initialPersons)\r\n      })\r\n  }, [])\r\n\r\n  const addName = (event) => {\r\n    event.preventDefault()\r\n\r\n    if (persons.find(person => person.name === newName)) {\r\n      let updateNumber =\r\n        window.confirm(`${newName} is already added to phonebook.\r\n          Would you like to update the number to ${newNumber}?`)\r\n      if (updateNumber) {\r\n        let id = persons.find(person => person.name === newName).id\r\n        console.log('attempting to update number')\r\n        const personObject = {\r\n          name: newName,\r\n          number: newNumber\r\n        }\r\n\r\n        personService\r\n          .update(id, personObject)\r\n\r\n          .then(updatedPerson =>{\r\n            console.log('update promise succesful')\r\n            setPersons(persons.map(person => person.id !== id\r\n              ? person : updatedPerson))\r\n            setNotificationMessage (\r\n              `${personObject.name}'s number was changed to ${personObject.number}.`\r\n            )\r\n          })\r\n\r\n          .catch(error => {\r\n            console.log('error caught')\r\n            setErrorMessage(\r\n              `That person was already removed from the server.`\r\n            )\r\n            personService.getAll()\r\n              .then(directory =>\r\n                setPersons(directory))\r\n            console.log('persons:', persons)\r\n            setTimeout(() => {\r\n              setErrorMessage(null)\r\n            }, 5000)\r\n\r\n          })\r\n\r\n          setNewName('')\r\n          setNewNumber('')\r\n          setTimeout(() => {\r\n            setNotificationMessage(null)\r\n          }, 5000)\r\n\r\n          return\r\n        } else {\r\n        console.log('update cancelled')\r\n        return\r\n        }\r\n      }\r\n\r\n\r\n    const personObject = {\r\n      name: newName,\r\n      number: newNumber\r\n    }\r\n\r\n    personService\r\n      .create(personObject)\r\n      .then(returnedPerson => {\r\n        setPersons(persons.concat(returnedPerson))\r\n        setNotificationMessage(`${returnedPerson.name} was added to the directory.`)\r\n        setNewName('')\r\n        setNewNumber('')\r\n        setTimeout(() => {\r\n          setNotificationMessage(null)\r\n        }, 5000)\r\n    })\r\n      .catch(error => {\r\n        console.log(error.response.data)\r\n        setErrorMessage(error.response.data.error)\r\n        setTimeout(() => {\r\n          setErrorMessage(null)\r\n        }, 5000)\r\n    })\r\n  }\r\n\r\n\r\n\r\n  const deletePerson = (event, id) => {\r\n    let areYouSure = window\r\n      .confirm(`Are you sure you want to remove ${persons.find(p => p.id === id).name}?`)\r\n\r\n    if (areYouSure) {\r\n      let delPersName = persons.find(p => p.id === id).name\r\n      console.log(`Attempting to delete entry ${id}`)\r\n      personService\r\n        .removePerson(id)\r\n        .then(response => {\r\n          setPersons(persons.filter(p => p.id !== id))\r\n        })\r\n        setNotificationMessage(`${delPersName} deleted from the directory.`)\r\n        setTimeout(() => {\r\n          setNotificationMessage(null)\r\n        }, 5000)\r\n    } else console.log('He chickened out, sir!')\r\n  }\r\n\r\n\r\n  const handleNameChange = (event) => {\r\n    console.log(event.target.value)\r\n    setNewName(event.target.value)\r\n  }\r\n\r\n  const handleNumberChange = (event) => {\r\n    console.log(event.target.value)\r\n    setNewNumber(event.target.value)\r\n  }\r\n\r\n  const handleFilterChange = (event) => {\r\n    console.log(event.target.value)\r\n    setPhonebookFilterString(event.target.value)\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <h1>Phonebook</h1>\r\n\r\n      <Notifications.Notification message={notificationMessage} />\r\n      <Notifications.Error message={errorMessage} />\r\n\r\n      <Filter phonebookFilterString={phonebookFilterString} handleFilterChange={handleFilterChange} />\r\n\r\n      <h2>Add new entries</h2>\r\n\r\n      <PersonForm addName={addName} handleNameChange={handleNameChange} newName={newName} newNumber ={newNumber} handleNumberChange={handleNumberChange} />\r\n\r\n      <h2>Entries</h2>\r\n\r\n      <Persons persons={persons} phonebookFilterString={phonebookFilterString} deletePerson={deletePerson}/>\r\n\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default App\r\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\n\n\n\nReactDOM.render(<App />, document.getElementById('root'));\n"],"sourceRoot":""}